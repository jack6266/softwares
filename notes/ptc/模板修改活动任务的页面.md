# 增加(活动) 任务类型

自定义一个任务类型，图示：

 					![image-20221014221533919](C:\Users\Elead\AppData\Roaming\Typora\typora-user-images\image-20221014221533919.png)

1. 修改wt.properties，增加一个任务类型（这里的task序号要顺序递增上去）。  在shell中执行：

​    xconfmanager -s wt.clients.workflow.tasks.task.7=customReview -t codebase/wt.properties -p



2. 修改 wt.clients.workflow.tasks.TasksRB, 增加：

   ```
   @RBEntry("customReview")
   public static final String CUSTOM_REVIEW = "customReview";
   ```

   修改wt.clients.workflow.tasks.TasksRB_zh_CN, 增加：

   ```
   @RBEntry("我的审阅")
   public static final String CUSTOM_REVIEW = "customReview";
   ```

​		编译资源文件，并 重启windchill服务

​		ant -f bin/tools.xml class -Dclass.includes=wt/clients/workflow/tasks/TasksRB.java 

​        ant -f bin/tools.xml class -Dclass.includes=wt/clients/workflow/tasks/TasksRB_zh_CN.java 

​    

# 更新任务表单模板



1. 在 “站点” 或者 “组织” 上下文 中的模板

    ![image-20221015093926467](C:\Users\Elead\AppData\Roaming\Typora\typora-user-images\image-20221015093926467.png)



2. 选择 “任务表单模板 ”    并更新![image-20221015094222392](C:\Users\Elead\AppData\Roaming\Typora\typora-user-images\image-20221015094222392.png)



3. 这里的模板可以创建或者更新， 可以选刚才自定义创建的 “任务类型”， 并上传jsp模板（预先写好的）,  可以上传JSP/XDP类型的文件![image-20221015210114720](C:\Users\Elead\AppData\Roaming\Typora\typora-user-images\image-20221015210114720.png)




# 更新工作流模板



1. 设置首选项  (确认以下的首选项值设置为 “是” )：

![image-20221015204420958](C:\Users\Elead\AppData\Roaming\Typora\typora-user-images\image-20221015204420958.png) 



2. 检出编辑需要调整的工作流模板，在工作流模板的 “活动选项卡”  从“活动” 菜单中选择最合适的任务类型（自己客制化的类型）。

 ![image-20221015100627860](C:\Users\Elead\AppData\Roaming\Typora\typora-user-images\image-20221015100627860.png)



3. 修改完成后，保存检入工作流模板，重新启动新的流程后活动页面就会更新了。



# 配置后页面不生效的检查



1. 删除tomcat缓存：

​		清空 <WT_HOME>\tomcat\instances 目录

2. 删除模板的jsp缓存

​		查看 codebase\netmarkets\jsp\customtemplates 目录下是否有site 开头的jsp文件，删除它们

3. 重启服务
